function showDeleteMultiModal(){var e=parseInt($("#leadsCount").val());if(e){var t=e>1?e+" Leads":e+" Lead";$(".leadCountTxt").text(t);$("#deleteMultiModal").modal("show")}else{$("#error").text("Select Atleast one record to Transfer.")}}function showTransferMultiModal(){var e=parseInt($("#leadsCount").val());if(e){var t=e>1?e+" Leads":e+" Lead";$(".leadCountTxt").text(t);$("#transferMultiModal").modal("show")}else{$("#error").text("Select Atleast one record to Delete.")}}function transferMultiLeads(){var e="";var t=$("#counselor option:selected").val();if(t=="")return;$("#sample-table-2").find("tr > td:first-child input:hidden").each(function(){var t=$(this).closest("tr").attr("id");var n=t.split("-");if($("#leadCheckBox-"+n[1]).prop("checked")){e+=e!=""?","+n[1]:n[1]}});dataString="leads="+e+"&counselorId="+t;$.post(base_url+"lead/transferMultiLead",dataString,function(e){$("#transferMultiModal").modal("hide");$("#sample-table-2").find("tr > td:first-child input:checkbox").each(function(){if(this.checked)$(this).closest("tr").remove()});$("#SuccessTransferModal").modal("show");setTimeout(function(){$("#SuccessTransferModal").modal("hide");location.reload()},1200)})}function showSmsMultiModal(){var e=parseInt($("#leadsCount").val());if(e){var t=e>1?e+" Leads":e+" Lead";$(".leadCountTxt").text(t);$("#smsMultiModal").modal("show")}else{$("#error").text("Select Atleast one record to Delete.")}}function smsMultiLeads(){var e="";$("#sample-table-2").find("tr > td:first-child input:hidden").each(function(){var t=$(this).closest("tr").attr("id");var n=t.split("-");if($("#leadCheckBox-"+n[1]).prop("checked")){e+=e!=""?","+n[1]:n[1]}});dataString="leads="+e+"&smsId="+$("#smsTemplates option:selected").val();$.post(base_url+"lead/smsMultiLead",dataString,function(e){$("#smsMultiModal").modal("hide");$("#SuccessSmsModal").modal("show");$("#responseSms").text(e);setTimeout(function(){$("#SuccessSmsModal").modal("hide")},3200)})}function deleteMultiLeads(){var e="";$("#sample-table-2").find("tr > td:first-child input:hidden").each(function(){var t=$(this).closest("tr").attr("id");var n=t.split("-");if($("#leadCheckBox-"+n[1]).prop("checked")){e+=e!=""?","+n[1]:n[1]}});dataString="leads="+e;$.post(base_url+"lead/deleteMultiLead",dataString,function(e){$("#deleteMultiModal").modal("hide");$("#sample-table-2").find("tr > td:first-child input:checkbox").each(function(){if(this.checked)$(this).closest("tr").remove()});$("#SuccessDeleteModal").modal("show");setTimeout(function(){$("#SuccessDeleteModal").modal("hide")},1200)})}function performAction(){if($("#action option:selected").val()=="transfer"){if($("#counselor option:selected").val()!=""){showTransferMultiModal()}else{$("#error").text("Select Counselor First.")}}else if($("#action option:selected").val()=="delete"){showDeleteMultiModal()}else if($("#action option:selected").val()=="sms"){if($("#smsTemplates option:selected").val()!=""){showSmsMultiModal()}else{$("#error").text("Select Template First.")}}else{$("#error").text("Select Action First.")}}jQuery(function(e){function t(t,n){var r=e(n);var i=r.closest("table");var s=i.offset();var o=i.width();var u=r.offset();var a=r.width();if(parseInt(u.left)<parseInt(s.left)+parseInt(o/2))return"right";return"left"}e("#sample-table-2").find("tr > td:first-child input:hidden").each(function(){var t=e(this).closest("tr").attr("id");var n=t.split("-");data="leadsId="+n[1];e.get(base_url+"lead/getIndividualNotes",data,function(t){e("#notes-"+n[1]).html(t)})});e("#sample-table-2").tablesorter({headers: { 0:{sorter: false}}});e(".chzn-select").css("width","150px").chosen({allow_single_deselect:true,no_results_text:"No such state!"}).on("change",function(){e(this).closest("form").validate().element(e(this))});e("table th input:checkbox").on("click",function(){var t=this;e(this).closest("table").find("tr > td:first-child input:checkbox").each(function(){this.checked=t.checked;e(this).closest("tr").toggleClass("selected")})});e('[data-rel="tooltip"]').tooltip({placement:t});e("#modal-form").on("show",function(){e(this).find(".chosen-container").each(function(){e(this).find("a:first-child").css("width","200px");e(this).find(".chosen-drop").css("width","210px");e(this).find(".chosen-search input").css("width","200px")})});e(".date-picker").datepicker().next().on(ace.click_event,function(){e(this).prev().focus()})});$("#modal_table tbody tr").click(function(){var e=$(this);var t=$(this).find("img").attr("src");var n=e.find("td:eq(1)").text();$("#r_img").attr("src",t);$("#r_txt").text(n);$("#res_edit").css("display","none")});$("table td input:checkbox").on("click",function(){var e=this;var t=$(this).closest("tr").attr("id");var n=t.split("-");$("#lead-"+n[1]).val(e.checked);var r=parseInt($("#leadsCount").val());r=e.checked?++r:--r;$("#leadsCount").val(r)});$("table th input:checkbox").on("click",function(){var e=this;$(this).closest("table").find("tr > td:first-child input:checkbox").each(function(){var t=$(this).closest("tr").attr("id");var n=t.split("-");$("#lead-"+n[1]).val(e.checked);this.checked=e.checked;var r=parseInt($("#leadsCount").val());if(e.checked)++r;else if(!e.checked&&r>0)--r;$("#leadsCount").val(r)})});$("#action").change(function(){if($("#action option:selected").val()=="transfer"){$("#counselor").show();$("#smsTemplates").hide()}else if($("#action option:selected").val()=="delete"){$("#counselor").hide();$("#smsTemplates").hide()}else{$("#counselor").hide();$("#smsTemplates").show()}})